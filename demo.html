<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分析君 - デモダッシュボード</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+JP:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="demo.css">
</head>

<body>

    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <a href="index.html" class="logo-area" style="text-decoration: none;">
                    <i data-lucide="play-square" class="logo-icon"></i>
                    <span class="logo-text">YouTube分析アプリ</span>
                    <span class="demo-badge">デモモード</span>
                </a>
            </div>
            <div class="header-right">
                <div class="header-warning">
                    <span class="badge">デモモード</span>
                    <p>これはデモデータです。実際のデータを見るには、YouTubeアカウントと接続してください。</p>
                </div>
                <nav class="top-nav">
                    <a href="#" class="nav-link active" onclick="switchPage('dashboard'); return false;">ダッシュボード</a>
                    <a href="#" class="nav-link" onclick="switchPage('channel'); return false;">チャンネル</a>
                    <a href="#" class="nav-link" onclick="switchPage('comparison'); return false;">比較</a>
                    <a href="#" class="nav-link" onclick="switchPage('settings'); return false;">設定</a>
                </nav>
            </div>
        </header>

        <div class="main-content">
            <!-- Dashboard Page -->
            <div id="page-dashboard" class="page-content">
                <div class="channel-title-section">
                    <h1>デモチャンネル</h1>
                </div>

                <!-- Sub Navigation -->
                <div class="sub-nav">
                    <button class="sub-nav-item active" onclick="switchMainTab('overview')">
                        <i data-lucide="layout-dashboard" size="18"></i> 概要
                    </button>
                    <button class="sub-nav-item" onclick="switchMainTab('analysis')">
                        <i data-lucide="bar-chart-3" size="18"></i> 分析
                    </button>
                    <button class="sub-nav-item" onclick="switchMainTab('engagement')">
                        <i data-lucide="heart" size="18"></i> エンゲージメント
                    </button>
                    <button class="sub-nav-item" onclick="switchMainTab('traffic')">
                        <i data-lucide="globe" size="18"></i> トラフィック
                    </button>
                    <button class="sub-nav-item" onclick="switchMainTab('device')">
                        <i data-lucide="smartphone" size="18"></i> デバイス・地域
                    </button>
                    <button class="sub-nav-item" onclick="switchMainTab('playlist')"><i data-lucide="list-video"
                            size="18"></i> プレイリスト</button>
                    <button class="sub-nav-item" onclick="switchMainTab('video')"><i data-lucide="video" size="18"></i>
                        動画</button>
                </div>

                <!-- Overview Tab Content -->
                <div id="overview-tab" class="dashboard-grid">
                    <!-- (Same as before) -->
                    <section class="card health-score-card">
                        <div class="card-header">
                            <h2>チャンネル健康スコア</h2>
                            <div class="score-display">
                                <span class="score-value">78</span>
                                <span class="score-total">/100</span>
                            </div>
                        </div>
                        <p class="subtitle">総合的なパフォーマンス指標</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 78%;"></div>
                        </div>
                        <p class="health-status">良好な状態です。さらなる改善の余地があります。</p>
                    </section>

                    <section class="metrics-row">
                        <div class="stat-card">
                            <div class="stat-icon-wrapper"><i data-lucide="users" size="24"></i></div>
                            <div class="stat-content">
                                <p class="stat-label">登録者数</p>
                                <h3 class="stat-value">12.5K</h3>
                                <p class="stat-sub">↑ 450</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon-wrapper"><i data-lucide="clock" size="24"></i></div>
                            <div class="stat-content">
                                <p class="stat-label">総再生時間</p>
                                <h3 class="stat-value">1.9M</h3>
                                <p class="stat-sub">時間</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon-wrapper"><i data-lucide="bar-chart-3" size="24"></i></div>
                            <div class="stat-content">
                                <p class="stat-label">投稿頻度</p>
                                <h3 class="stat-value">3.5</h3>
                                <p class="stat-sub">回/週</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon-wrapper"><i data-lucide="video" size="24"></i></div>
                            <div class="stat-content">
                                <p class="stat-label">総動画数</p>
                                <h3 class="stat-value">57</h3>
                                <p class="stat-sub">動画: 45 <span class="sub-label-dim">ショート: 12</span></p>
                            </div>
                        </div>
                    </section>

                    <section class="insights-section">
                        <h3>パフォーマンスインサイト</h3>
                        <div class="metrics-row">
                            <div class="insight-card">
                                <p class="insight-label">直近5本の平均CTR</p>
                                <h3 class="insight-value">6.3%</h3>
                                <span class="insight-change">↑ 0.5%</span>
                            </div>
                            <div class="insight-card">
                                <p class="insight-label">直近10本の平均CTR</p>
                                <h3 class="insight-value">5.9%</h3>
                            </div>
                            <div class="insight-card">
                                <p class="insight-label">直近5本の平均視聴維持率</p>
                                <h3 class="insight-value">61.4%</h3>
                                <span class="insight-change">↑ 0.7%</span>
                            </div>
                            <div class="insight-card">
                                <p class="insight-label">直近10本の平均視聴維持率</p>
                                <h3 class="insight-value">61.7%</h3>
                            </div>
                        </div>
                    </section>

                    <section class="recent-videos-section">
                        <div class="section-header-row">
                            <h3>最近の動画</h3>
                            <div class="filter-buttons">
                                <button class="filter-btn active">すべて</button>
                                <button class="filter-btn">ショート</button>
                                <button class="filter-btn">ロング</button>
                            </div>
                        </div>

                        <div class="video-grid">
                            <!-- Video cards (same as before) -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        alt="Video" class="thumbnail">
                                    <span class="duration-badge">18分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">タイトル作成の5つのルール</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">100.3K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">6.7%</span>
                                        </div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">64.7%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月11日</span></div>
                                </div>
                            </div>
                            <!-- (More video cards omitted for brevity, keeping 1 for structure in overview) -->
                        </div>
                    </section>
                </div>

                <!-- Analysis Tab Content -->
                <div id="analysis-tab" class="analysis-container" style="display: none;">
                    <!-- (Same as before) -->
                    <div class="analysis-sub-nav">
                        <button class="analysis-nav-item active" onclick="switchAnalysisSubTab('general')"><i
                                data-lucide="bar-chart-3" size="16"></i> 分析</button>
                        <button class="analysis-nav-item" onclick="switchAnalysisSubTab('ai')"><i data-lucide="sparkles"
                                size="16"></i> AI分析</button>
                        <button class="analysis-nav-item" onclick="switchAnalysisSubTab('keyword')"><i data-lucide="tag"
                                size="16"></i> キーワード分析</button>
                        <button class="analysis-nav-item" onclick="switchAnalysisSubTab('thumbnail')"><i
                                data-lucide="image" size="16"></i> サムネイル分析</button>
                    </div>

                    <div id="analysis-general" class="analysis-sub-content">
                        <div class="feature-banner">
                            <div class="banner-content">
                                <span class="banner-icon-spin"><i data-lucide="sparkles" size="16"></i></span>
                                <span class="new-badge">NEW</span>
                                <span class="banner-text">新機能でより深い分析を</span>
                            </div>
                            <div class="banner-actions">
                                <button class="banner-btn" onclick="switchAnalysisSubTab('keyword')"><i
                                        data-lucide="tag" size="14"></i> キーワード分析</button>
                                <button class="banner-btn" onclick="switchAnalysisSubTab('thumbnail')"><i
                                        data-lucide="image" size="14"></i> サムネイル分析</button>
                            </div>
                        </div>

                        <div class="card detailed-chart-card">
                            <div class="chart-header">
                                <h3>動画パフォーマンス推移</h3>
                                <p>再生回数とCTRの推移（直近5本・10本の平均線付き）</p>
                            </div>
                            <div class="main-chart-wrapper">
                                <canvas id="trendChart"></canvas>
                            </div>
                        </div>

                        <div class="analysis-grid-row">
                            <div class="card chart-card">
                                <h3>コンテンツタイプ内訳</h3>
                                <p class="chart-sub">動画とショートの比率</p>
                                <div class="chart-content pie-container">
                                    <canvas id="pieChart"></canvas>
                                </div>
                            </div>
                            <div class="card chart-card">
                                <h3>パフォーマンス総合評価</h3>
                                <p class="chart-sub">主要指標の総合的なバランス</p>
                                <div class="chart-content">
                                    <canvas id="radarChart"></canvas>
                                </div>
                            </div>
                            <div class="card chart-card">
                                <h3>カテゴリー別の平均再生回数</h3>
                                <p class="chart-sub">カテゴリー別の平均再生回数</p>
                                <div class="chart-content">
                                    <canvas id="barChart1"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Analysis -->
                    <div id="analysis-ai" class="analysis-sub-content" style="display: none;">
                        <div class="analysis-main-header">
                            <h2>AIチャンネル分析</h2>
                            <button class="ai-generate-btn">AI生成</button>
                        </div>
                        <div class="ai-section-card">
                            <div class="ai-section-title"><i data-lucide="sparkles" size="20"></i> チャンネル全体の分析</div>
                            <p class="ai-text-content">
                                チャンネル全体の分析結果：平均CTR 6.2%、平均視聴維持率 53.1%、平均再生回数
                                64K回という高いパフォーマンスを示しています。特にハウツー系コンテンツが好調で、視聴者からの信頼が高まっている傾向が見られます。
                            </p>
                        </div>
                        <!-- (Content same as before) -->
                        <div class="ai-section-card">
                            <div class="ai-section-title"><i data-lucide="video" size="20"></i> 次の動画の切り口アイデア</div>
                            <!-- Items omitted for brevity, JS handles structure -->
                        </div>
                    </div>

                    <!-- Keyword Analysis -->
                    <div id="analysis-keyword" class="analysis-sub-content" style="display: none;">
                        <!-- (Content same as before, simplified charts logic below) -->
                        <div class="card detailed-chart-card">
                            <h3>キーワード別の平均再生回数</h3>
                            <div class="main-chart-wrapper" style="height: 400px;">
                                <canvas id="keywordBarChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Thumbnail Analysis -->
                    <div id="analysis-thumbnail" class="analysis-sub-content" style="display: none;">
                        <!-- (Content same as before) -->
                        <div class="card detailed-chart-card">
                            <h3>解像度別の平均再生回数</h3>
                            <div class="main-chart-wrapper">
                                <canvas id="thumbViewsChart"></canvas>
                            </div>
                        </div>
                        <div class="card detailed-chart-card">
                            <h3>解像度別の平均CTR</h3>
                            <div class="main-chart-wrapper">
                                <canvas id="thumbCTRChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Engagement Tab -->
                <div id="engagement-tab" class="analysis-container" style="display: none;">
                    <div class="three-col-layout">
                        <!-- Left Sidebar -->
                        <aside class="sidebar-left">
                            <span class="filter-section-title">フィルター</span>

                            <div class="filter-group">
                                <span class="filter-label">日付範囲</span>
                                <div class="date-input-group">
                                    <div class="date-input-wrapper">
                                        <input type="date" class="date-input" value="2025-11-11">
                                    </div>
                                    <div class="date-input-wrapper">
                                        <input type="date" class="date-input" value="2025-12-11">
                                    </div>
                                </div>
                                <div class="preset-buttons">
                                    <button class="preset-btn">過去7日</button>
                                    <button class="preset-btn active">過去30日</button>
                                    <button class="preset-btn">過去90日</button>
                                </div>
                            </div>

                            <div class="filter-group">
                                <span class="filter-label">動画タイプ</span>
                                <div class="type-buttons">
                                    <button class="type-btn active">すべて</button>
                                    <button class="type-btn">ショート</button>
                                    <button class="type-btn">ロング</button>
                                </div>
                            </div>

                            <div class="reset-btn-wrapper">
                                <button class="reset-btn">リセット</button>
                            </div>
                        </aside>

                        <!-- Center Content -->
                        <main class="content-center">
                            <div class="analysis-section-header">
                                <h3>エンゲージメント率分析</h3>
                            </div>

                            <div class="stats-row">
                                <div class="stat-box">
                                    <label>平均いいね率</label>
                                    <div class="value">4.71%</div>
                                </div>
                                <div class="stat-box">
                                    <label>平均コメント率</label>
                                    <div class="value">1.05%</div>
                                </div>
                            </div>

                            <div class="wide-chart-card">
                                <div class="chart-title-area">
                                    <h4>エンゲージメント率ランキング</h4>
                                    <p>動画別のいいね率とコメント率</p>
                                </div>
                                <div class="main-chart-wrapper" style="height: 350px;">
                                    <canvas id="engagementRankingChart"></canvas>
                                </div>
                            </div>

                            <!-- Recommendation -->
                            <div class="analysis-section-header"
                                style="margin-top: 10px; background: transparent; border: none; padding: 0;">
                                <h3 style="font-size: 1rem; margin-bottom: 10px;">推奨事項</h3>
                            </div>
                            <div class="rec-box">
                                <span style="font-size: 1.2rem;">💡</span>
                                <p>エンゲージメント率が良好です。この調子で視聴者との交流を深めましょう。</p>
                            </div>
                        </main>

                        <!-- Right Sidebar -->
                        <aside class="sidebar-right">
                            <div class="video-list-header">
                                <h4>動画を選択</h4>
                                <p>ドラッグしてグラフにドロップ</p>
                            </div>
                            <div class="video-select-list">
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】裏技公開</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】裏技公開</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">動画</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">エンゲージメントを高める方法</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1593642532400-2682810df593?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">動画</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">収益化のコツ</div>
                                    </div>
                                </a>
                            </div>
                        </aside>
                    </div>
                </div>

                <!-- Traffic Tab -->
                <div id="traffic-tab" class="analysis-container" style="display: none;">
                    <div class="three-col-layout">
                        <!-- Left Sidebar -->
                        <aside class="sidebar-left">
                            <span class="filter-section-title">フィルター</span>
                            <!-- Date Filter (Copied) -->
                            <div class="filter-group">
                                <span class="filter-label">日付範囲</span>
                                <div class="date-input-group">
                                    <div class="date-input-wrapper"><input type="date" class="date-input"
                                            value="2025-11-11"></div>
                                    <div class="date-input-wrapper"><input type="date" class="date-input"
                                            value="2025-12-11"></div>
                                </div>
                            </div>
                            <div class="filter-group">
                                <span class="filter-label">動画タイプ</span>
                                <div class="type-buttons">
                                    <button class="type-btn active">すべて</button>
                                    <button class="type-btn">ショート</button>
                                    <button class="type-btn">ロング</button>
                                </div>
                            </div>
                            <div class="filter-group">
                                <span class="filter-label">トラフィックソース</span>
                                <div class="checkbox-group">
                                    <label class="checkbox-item"><input type="checkbox" checked> 検索</label>
                                    <label class="checkbox-item"><input type="checkbox" checked> 提案動画</label>
                                    <label class="checkbox-item"><input type="checkbox" checked> チャンネルページ</label>
                                    <label class="checkbox-item"><input type="checkbox" checked> 外部URL</label>
                                </div>
                            </div>
                            <div class="reset-btn-wrapper"><button class="reset-btn">リセット</button></div>
                        </aside>

                        <!-- Center -->
                        <main class="content-center">
                            <div class="analysis-section-header">
                                <h3>トラフィックソース分析</h3>
                            </div>

                            <div class="two-col-charts">
                                <div class="wide-chart-card">
                                    <div class="chart-title-area">
                                        <h4>トラフィックソース別の視聴数</h4>
                                        <p>視聴者がどこから来たか</p>
                                    </div>
                                    <div class="main-chart-wrapper" style="height: 250px;">
                                        <canvas id="trafficSourceChart"></canvas>
                                    </div>
                                </div>
                                <div class="wide-chart-card">
                                    <div class="chart-title-area">
                                        <h4>トラフィックソース別の割合</h4>
                                        <p>視聴数の内訳</p>
                                    </div>
                                    <div class="main-chart-wrapper" style="height: 250px;">
                                        <canvas id="trafficPieChart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <div class="wide-chart-card">
                                <div class="chart-title-area">
                                    <h4>トラフィックソース別の視聴時間</h4>
                                    <p>ソース別の視聴時間（分）</p>
                                </div>
                                <div class="main-chart-wrapper" style="height: 300px;">
                                    <canvas id="trafficWatchTimeChart"></canvas>
                                </div>
                            </div>
                        </main>

                        <!-- Right Sidebar -->
                        <aside class="sidebar-right">
                            <div class="video-list-header">
                                <h4>動画を選択</h4>
                                <p>ドラッグしてグラフにドロップ</p>
                            </div>
                            <div class="video-select-list">
                                <!-- Duplicate items for demo -->
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】裏技公開</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】裏技公開</div>
                                    </div>
                                </a>
                            </div>
                        </aside>
                    </div>
                </div>

                <!-- Device Tab -->
                <div id="device-tab" class="analysis-container" style="display: none;">
                    <div class="device-tabs">
                        <button class="d-tab-btn active">デバイス</button>
                        <button class="d-tab-btn">地域</button>
                        <button class="d-tab-btn">デモグラフィック</button>
                    </div>

                    <div class="three-col-layout" style="margin-top: 0;">
                        <aside class="sidebar-left">
                            <span class="filter-section-title">フィルター</span>
                            <!-- Date Filter -->
                            <div class="filter-group">
                                <span class="filter-label">日付範囲</span>
                                <div class="date-input-group">
                                    <div class="date-input-wrapper"><input type="date" class="date-input"
                                            value="2025-11-11"></div>
                                    <div class="date-input-wrapper"><input type="date" class="date-input"
                                            value="2025-12-11"></div>
                                </div>
                            </div>
                            <div class="filter-group">
                                <span class="filter-label">デバイスタイプ</span>
                                <div class="checkbox-group">
                                    <label class="checkbox-item"><input type="checkbox" checked> モバイル</label>
                                    <label class="checkbox-item"><input type="checkbox" checked> PC</label>
                                </div>
                            </div>
                        </aside>

                        <main class="content-center">
                            <div class="analysis-section-header">
                                <h3>デバイス別分析</h3>
                            </div>
                            <div class="two-col-charts">
                                <div class="wide-chart-card">
                                    <div class="chart-title-area">
                                        <h4>デバイス別の視聴数</h4>
                                        <p>デバイスタイプ別の視聴数</p>
                                    </div>
                                    <div class="main-chart-wrapper" style="height: 300px;">
                                        <canvas id="deviceViewsChart"></canvas>
                                    </div>
                                </div>
                                <div class="wide-chart-card">
                                    <div class="chart-title-area">
                                        <h4>デバイス別の割合</h4>
                                        <p>視聴数の内訳</p>
                                    </div>
                                    <div class="main-chart-wrapper" style="height: 300px;">
                                        <canvas id="devicePieChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </main>

                        <aside class="sidebar-right">
                            <div class="video-list-header">
                                <h4>動画を選択</h4>
                                <p>ドラッグしてグラフにドロップ</p>
                            </div>
                            <div class="video-select-list">
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】裏技公開</div>
                                    </div>
                                </a>
                            </div>
                        </aside>
                    </div>
                </div>

                <!-- Playlist Tab -->
                <div id="playlist-tab" class="analysis-container" style="display: none;">
                    <div class="three-col-layout">
                        <!-- Left Sidebar -->
                        <aside class="sidebar-left">
                            <span class="filter-section-title">フィルター</span>
                            <div class="filter-group">
                                <span class="filter-label">日付範囲</span>
                                <div class="date-input-group">
                                    <div class="date-input-wrapper">
                                        <input type="date" class="date-input" value="2025-11-12">
                                    </div>
                                    <div class="date-input-wrapper">
                                        <input type="date" class="date-input" value="2025-12-12">
                                    </div>
                                </div>
                                <div class="preset-buttons">
                                    <button class="preset-btn">過去7日</button>
                                    <button class="preset-btn active">過去30日</button>
                                    <button class="preset-btn">過去90日</button>
                                </div>
                            </div>

                            <div class="filter-group">
                                <span class="filter-label">動画タイプ</span>
                                <div class="type-buttons">
                                    <button class="type-btn active">すべて</button>
                                    <button class="type-btn">ショート</button>
                                    <button class="type-btn">ロング</button>
                                </div>
                            </div>

                            <div class="reset-btn-wrapper">
                                <button class="reset-btn">リセット</button>
                            </div>
                        </aside>

                        <!-- Center Content -->
                        <main class="content-center">
                            <div class="analysis-section-header">
                                <h3>プレイリスト分析</h3>
                            </div>

                            <div class="card detailed-chart-card">
                                <div class="chart-header">
                                    <h3>プレイリスト別の視聴数</h3>
                                    <p>プレイリスト経由の視聴数</p>
                                </div>
                                <div class="main-chart-wrapper">
                                    <canvas id="playlistViewsChart"></canvas>
                                </div>
                            </div>

                            <div class="card detailed-chart-card">
                                <div class="chart-header">
                                    <h3>プレイリスト別の視聴時間</h3>
                                    <p>プレイリスト経由の視聴時間（分）</p>
                                </div>
                                <div class="main-chart-wrapper">
                                    <canvas id="playlistWatchTimeChart"></canvas>
                                </div>
                            </div>
                        </main>

                        <!-- Right Sidebar -->
                        <aside class="sidebar-right">
                            <div class="video-list-header">
                                <h4>動画を選択</h4>
                                <p>ドラッグしてグラフにドロップ</p>
                            </div>
                            <div class="video-select-list">
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【検証】最適化テクニック</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【比較】違いがわかる</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">動画</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">タイトル×サムネの作り方完全ガイド</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1593642532400-2682810df593?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">動画</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">YouTubeアルゴリズムの仕組み</div>
                                    </div>
                                </a>
                            </div>
                        </aside>
                    </div>
                </div> <!-- End of playlist-tab -->

                <!-- Video Tab -->
                <div id="video-tab" class="analysis-container" style="display: none;">
                    <!-- (Content remains same as previous implementation) -->
                    <div class="section-header-row"
                        style="margin-bottom: 24px; background: #fff; padding: 16px 24px; border-radius: 8px; border: 1px solid #e2e8f0;">
                        <h3>最近の動画</h3>
                        <div class="filter-buttons">
                            <button class="filter-btn active">すべて</button>
                            <button class="filter-btn">ショート</button>
                            <button class="filter-btn">ロング</button>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 280px; gap: 24px; align-items: start;">
                        <div class="video-grid" style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));">
                            <!-- Video Item 1 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">2分</span>
                                    <span class="type-badge">ショート</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">【検証】最適化テクニック</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">39.5K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">4.6%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">52%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月12日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 2 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">2分</span>
                                    <span class="type-badge">ショート</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">【比較】違いがわかる</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">18.3K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">6.7%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">45.5%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月10日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 3 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">10分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">タイトル×サムネの作り方完全ガイド</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">74.3K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span class="val">5%</span>
                                        </div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">55.5%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月8日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 4 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1593642532400-2682810df593?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">0分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">YouTubeアルゴリズムの仕組み</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">55.1K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">7.6%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">47%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月7日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 5 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">11分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">YouTubeアルゴリズムの仕組み</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">103.0K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">6.6%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">57.5%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月6日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 6 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1515263487990-61b07816b324?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">20分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">視聴者を増やす10の方法</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">116.1K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">7.7%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">47.6%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月4日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 7 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1593642532400-2682810df593?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">8分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">収益化のコツ</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">62.7K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">6.7%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">64.9%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月3日</span></div>
                                </div>
                            </div>
                            <!-- Video Item 8 -->
                            <div class="video-card">
                                <div class="thumbnail-wrapper">
                                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                        class="thumbnail">
                                    <span class="duration-badge">18分</span>
                                    <span class="type-badge">動画</span>
                                </div>
                                <div class="video-info">
                                    <h4 class="video-title">成功YouTuberの習慣</h4>
                                    <div class="video-stats">
                                        <div class="stat-item"><span class="label">再生回数</span><span
                                                class="val">62.1K</span></div>
                                        <div class="stat-item"><span class="label">CTR</span><span
                                                class="val">4.8%</span></div>
                                        <div class="stat-item"><span class="label">視聴維持率</span><span
                                                class="val">66.4%</span></div>
                                    </div>
                                    <div class="video-footer"><span class="date">12月1日</span></div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Sidebar -->
                        <aside class="sidebar-right">
                            <div class="video-list-header">
                                <h4>動画を選択</h4>
                                <p>ドラッグしてグラフにドロップ</p>
                            </div>
                            <div class="video-select-list">
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【解説】最適化テクニック</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">ショート</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">【検証】最速化テクニック</div>
                                    </div>
                                </a>
                                <a href="#" class="video-select-item">
                                    <div class="v-thumb">
                                        <img
                                            src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80">
                                        <span class="v-badge">動画</span>
                                    </div>
                                    <div class="v-details">
                                        <div class="v-title">YouTubeアルゴリズムの仕組み</div>
                                    </div>
                                </a>
                            </div>
                        </aside>
                    </div>
                </div>

            </div> <!-- End of page-dashboard -->

            <!-- Channel Page -->
            <div id="page-channel" class="page-content" style="display: none;">
                <div class="channel-select-container">
                    <h2 class="page-title center">チャンネルを選択</h2>
                    <p class="page-desc center">分析したいチャンネルを選択してください</p>
                    <div class="channel-card-trigger">
                        <div class="ch-card-header">
                            <h3>デモチャンネル</h3>
                            <span class="ch-sub-label">登録者数</span>
                        </div>
                        <div class="ch-stat-large">12.5K</div>
                    </div>
                </div>
            </div>

            <!-- Comparison Page -->
            <div id="page-comparison" class="page-content" style="display: none;">
                <div class="page-header">
                    <h2>動画比較</h2>
                    <p>3本の動画を比較中</p>
                </div>

                <!-- Comparison Video Row -->
                <div class="comparison-video-row">
                    <!-- Video 1 -->
                    <div class="c-video-card">
                        <div class="thumbnail-wrapper">
                            <img src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                class="thumbnail">
                        </div>
                        <div class="c-video-info">
                            <div class="c-v-title">YouTube分析の基本と実践</div>
                            <span class="c-v-dur">12分</span>
                        </div>
                    </div>
                    <!-- Video 2 -->
                    <div class="c-video-card">
                        <div class="thumbnail-wrapper">
                            <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                class="thumbnail">
                        </div>
                        <div class="c-video-info">
                            <div class="c-v-title">タイトル×サムネの作り方完全ガイド</div>
                            <span class="c-v-dur">10分</span>
                        </div>
                    </div>
                    <!-- Video 3 -->
                    <div class="c-video-card">
                        <div class="thumbnail-wrapper">
                            <img src="https://images.unsplash.com/photo-1515263487990-61b07816b324?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                                class="thumbnail">
                        </div>
                        <div class="c-video-info">
                            <div class="c-v-title">チャンネル成長戦略2025</div>
                            <span class="c-v-dur">15分</span>
                        </div>
                    </div>
                </div>

                <!-- Comparison Charts -->
                <div class="comparison-grid">
                    <div class="card chart-card">
                        <h3>CTR比較</h3>
                        <p class="chart-sub">クリック率 (%)</p>
                        <div class="main-chart-wrapper">
                            <canvas id="compCTRChart"></canvas>
                        </div>
                    </div>
                    <div class="card chart-card">
                        <h3>視聴維持率比較</h3>
                        <p class="chart-sub">視聴維持率 (%)</p>
                        <div class="main-chart-wrapper">
                            <canvas id="compRetentionChart"></canvas>
                        </div>
                    </div>
                    <div class="card chart-card">
                        <h3>再生回数比較</h3>
                        <p class="chart-sub">総再生回数</p>
                        <div class="main-chart-wrapper">
                            <canvas id="compViewsChart"></canvas>
                        </div>
                    </div>
                    <div class="card chart-card">
                        <h3>初動72時間の再生回数</h3>
                        <p class="chart-sub">公開後72時間の再生回数</p>
                        <div class="main-chart-wrapper">
                            <canvas id="compInitialViewsChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Detailed Comparison Table -->
                <div class="card detailed-chart-card">
                    <h3>詳細比較</h3>
                    <div class="table-responsive">
                        <table class="comp-table">
                            <thead>
                                <tr>
                                    <th>動画</th>
                                    <th>CTR</th>
                                    <th>視聴維持率</th>
                                    <th>再生回数</th>
                                    <th>初動72時間</th>
                                    <th>動画時間</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="tbl-video-cell"><img
                                            src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png"
                                            width="20" style="margin-right:8px;"> YouTube分析の基本と実践</td>
                                    <td>5.6%</td>
                                    <td>48%</td>
                                    <td>32.0K</td>
                                    <td>3.2K</td>
                                    <td>12分</td>
                                </tr>
                                <tr>
                                    <td class="tbl-video-cell"><img
                                            src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png"
                                            width="20" style="margin-right:8px;"> タイトル×サムネの作り方完全ガイド</td>
                                    <td>6.2%</td>
                                    <td>52%</td>
                                    <td>41.0K</td>
                                    <td>4.1K</td>
                                    <td>10分</td>
                                </tr>
                                <tr>
                                    <td class="tbl-video-cell"><img
                                            src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png"
                                            width="20" style="margin-right:8px;"> チャンネル成長戦略2025</td>
                                    <td>4.9%</td>
                                    <td>45%</td>
                                    <td>28.0K</td>
                                    <td>2.6K</td>
                                    <td>15分</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="page-settings" class="page-content" style="display: none;">
                <div class="page-header">
                    <h2>設定</h2>
                    <p>アカウントとチャンネルの設定を管理できます</p>
                </div>

                <div class="settings-section card">
                    <h3>アカウント情報</h3>
                    <div class="setting-row">
                        <label>メールアドレス</label>
                        <div class="setting-val">demo@example.com</div>
                    </div>
                    <div class="setting-row">
                        <label>接続状態</label>
                        <span class="status-badge connected">接続中</span>
                    </div>
                </div>

                <div class="settings-section card">
                    <h3>チャンネル情報</h3>
                    <div class="setting-row">
                        <label>チャンネル名</label>
                        <div class="setting-val bold">デモチャンネル</div>
                    </div>
                </div>

                <div class="settings-section card">
                    <h3>接続管理</h3>
                    <div class="setting-actions">
                        <button class="btn-dark">再接続</button>
                        <button class="btn-outline-danger">接続を解除</button>
                    </div>
                </div>

                <div class="settings-section card">
                    <h3>その他の設定</h3>
                    <div class="setting-row">
                        <label>データ更新頻度</label>
                        <div class="setting-val">自動（1時間ごと）</div>
                    </div>
                    <div class="setting-row">
                        <label>通知設定</label>
                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider round"></span>
                            </label>
                            <span class="toggle-label">メール通知を有効にする</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        lucide.createIcons();

        // Chart instances
        let trendChartObj = null;
        let pieChartObj = null;
        let radarChartObj = null;
        let barChart1Obj = null;
        let keywordBarChartObj = null;
        let thumbViewsChartObj = null;
        let thumbCTRChartObj = null;
        let engagementRankingChartObj = null;
        let trafficSourceChartObj = null;
        let trafficPieChartObj = null;
        let trafficWatchTimeChartObj = null;
        let deviceViewsChartObj = null;
        let devicePieChartObj = null;
        let playlistViewsChartObj = null;
        let playlistWatchTimeChartObj = null;

        // Comparison Charts
        let compCTRChartObj = null;
        let compRetentionChartObj = null;
        let compViewsChartObj = null;
        let compInitialViewsChartObj = null;

        function switchPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(el => el.style.display = 'none');
            // Show selected page
            document.getElementById('page-' + pageId).style.display = 'block';

            // Active Nav
            document.querySelectorAll('.top-nav .nav-link').forEach(el => el.classList.remove('active'));
            // Find idx
            const navMap = { 'dashboard': 0, 'channel': 1, 'comparison': 2, 'settings': 3 };
            if (document.querySelectorAll('.top-nav .nav-link')[navMap[pageId]]) {
                document.querySelectorAll('.top-nav .nav-link')[navMap[pageId]].classList.add('active');
            }

            if (pageId === 'comparison') {
                setTimeout(initComparisonCharts, 50);
            }
        }

        function switchMainTab(tabName) {
            // Hide all tabs
            ['overview', 'analysis', 'engagement', 'traffic', 'device', 'playlist', 'video'].forEach(name => {
                document.getElementById(name + '-tab').style.display = 'none';
            });
            // Reset Nav
            document.querySelectorAll('.sub-nav .sub-nav-item').forEach(el => el.classList.remove('active'));

            // Show selected
            document.getElementById(tabName + '-tab').style.display = (tabName === 'overview') ? 'flex' : 'block';

            // Highlight nav
            const navIndex = { 'overview': 0, 'analysis': 1, 'engagement': 2, 'traffic': 3, 'device': 4, 'playlist': 5, 'video': 6 }[tabName];
            if (document.querySelectorAll('.sub-nav .sub-nav-item')[navIndex]) {
                document.querySelectorAll('.sub-nav .sub-nav-item')[navIndex].classList.add('active');
            }

            // Init charts for specific tabs
            if (tabName === 'analysis') {
                switchAnalysisSubTab('general');
            } else if (tabName === 'engagement') {
                setTimeout(initEngagementCharts, 50);
            } else if (tabName === 'traffic') {
                setTimeout(initTrafficCharts, 50);
            } else if (tabName === 'device') {
                setTimeout(initDeviceCharts, 50);
            } else if (tabName === 'playlist') {
                setTimeout(initPlaylistCharts, 50);
            }
            lucide.createIcons();
        }

        function initPlaylistCharts() {
            if (playlistViewsChartObj) return;

            // Playlist Views Chart
            playlistViewsChartObj = new Chart(document.getElementById('playlistViewsChart'), {
                type: 'bar',
                data: {
                    labels: ['PL000001', 'PL000002', 'PL000003', 'PL000004'],
                    datasets: [{
                        label: '視聴数',
                        data: [15000, 12000, 8000, 5000],
                        backgroundColor: '#818cf8',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        x: {
                            ticks: { autoSkip: false, maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Playlist Watch Time Chart
            playlistWatchTimeChartObj = new Chart(document.getElementById('playlistWatchTimeChart'), {
                type: 'bar',
                data: {
                    labels: ['PL000001', 'PL000002', 'PL000003', 'PL000004'],
                    datasets: [{
                        label: '視聴時間 (分)',
                        data: [120000, 95000, 65000, 40000],
                        backgroundColor: '#f472b6',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        x: {
                            ticks: { autoSkip: false, maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function switchAnalysisSubTab(subTabName) {
            document.querySelectorAll('.analysis-sub-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.analysis-sub-nav .analysis-nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('analysis-' + subTabName).style.display = 'block';

            const navIndex = { 'general': 0, 'ai': 1, 'keyword': 2, 'thumbnail': 3 }[subTabName];
            const navItems = document.querySelectorAll('.analysis-sub-nav .analysis-nav-item');
            if (navItems[navIndex]) navItems[navIndex].classList.add('active');

            if (subTabName === 'general') setTimeout(initGeneralCharts, 50);
            else if (subTabName === 'keyword') setTimeout(initKeywordCharts, 50);
            else if (subTabName === 'thumbnail') setTimeout(initThumbnailCharts, 50);
            lucide.createIcons();
        }

        /* --- Initialization Functions --- */
        function initGeneralCharts() {
            if (trendChartObj) return;
            const trendGradient = document.getElementById('trendChart').getContext('2d').createLinearGradient(0, 0, 0, 300);
            trendGradient.addColorStop(0, 'rgba(99, 102, 241, 0.2)');
            trendGradient.addColorStop(1, 'rgba(99, 102, 241, 0)');

            trendChartObj = new Chart(document.getElementById('trendChart'), {
                type: 'line',
                data: {
                    labels: ['11/13', '11/14', '11/16', '11/17', '11/19', '11/20', '11/22', '11/23', '11/26', '11/28', '11/29', '11/30', '12/02', '12/03', '12/06', '12/07', '12/08', '12/09', '12/11'],
                    datasets: [
                        { label: '再生回数', data: [30000, 25000, 35000, 50000, 45000, 55000, 80000, 100000, 95000, 40000, 110000, 115000, 70000, 60000, 85000, 90000, 80000, 75000, 105000], borderColor: '#6366f1', backgroundColor: trendGradient, fill: true, tension: 0.4, yAxisID: 'y' },
                        { label: 'CTR (%)', data: [5.2, 5.1, 4.8, 5.3, 5.4, 5.5, 5.8, 5.9, 5.2, 5.7, 5.1, 5.3, 5.2, 5.1, 5.4, 5.5, 5.2, 5.3, 5.8], borderColor: '#0f172a', borderDash: [5, 5], pointRadius: 0, borderWidth: 2, tension: 0.4, yAxisID: 'y1' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false }, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false }, ticks: { font: { size: 10 } } }, y: { display: false }, y1: { display: false, type: 'linear', position: 'right', min: 0, max: 8 } } }
            });

            pieChartObj = new Chart(document.getElementById('pieChart'), {
                type: 'doughnut',
                data: { labels: ['動画', 'ショート'], datasets: [{ data: [79, 21], backgroundColor: ['#334155', '#818cf8'], borderWidth: 0 }] },
                options: { cutout: '70%', plugins: { legend: { display: false } } }
            });

            radarChartObj = new Chart(document.getElementById('radarChart'), {
                type: 'radar',
                data: { labels: ['再生回数', '視聴維持率', '再生時間', '投稿頻度', '登録者数', 'CTR'], datasets: [{ label: 'Performance', data: [80, 90, 85, 60, 70, 95], fill: true, backgroundColor: 'rgba(129, 140, 248, 0.2)', borderColor: '#818cf8', pointBackgroundColor: '#818cf8' }] },
                options: { scales: { r: { angleLines: { color: '#e2e8f0' }, grid: { color: '#e2e8f0' }, ticks: { display: false, max: 100 } } }, plugins: { legend: { display: false } } }
            });

            barChart1Obj = new Chart(document.getElementById('barChart1'), {
                type: 'bar',
                data: { labels: ['ハウツー', '解説', 'ショート', 'レビュー'], datasets: [{ label: '平均再生回数', data: [45000, 38000, 32000, 28000], backgroundColor: '#818cf8', borderRadius: 4 }] },
                options: { scales: { x: { grid: { display: false } }, y: { display: false } }, plugins: { legend: { display: false } } }
            });
        }

        function initKeywordCharts() {
            if (keywordBarChartObj) return;
            keywordBarChartObj = new Chart(document.getElementById('keywordBarChart'), {
                type: 'bar', indexAxis: 'y',
                data: { labels: ['成功youtuberの習慣', 'youtuber', '収益化のコツ', '解説', 'ガイド', 'youtube', '分析', 'チュートリアル', '【解説】裏技公開', '【Tips】すぐ使える方法', 'tips'], datasets: [{ label: '平均再生回数', data: [79100, 79100, 70800, 73800, 66500, 65000, 65000, 65000, 48000, 43500, 43500], backgroundColor: '#818cf8', borderRadius: 4, barThickness: 20 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { x: { grid: { borderDash: [2, 2] } }, y: { grid: { display: false } } } }
            });
        }

        function initThumbnailCharts() {
            if (thumbViewsChartObj) return;
            thumbViewsChartObj = new Chart(document.getElementById('thumbViewsChart'), {
                type: 'bar', data: { labels: ['高解像度', '最高解像度'], datasets: [{ label: '平均再生回数', data: [67700, 63800], backgroundColor: '#818cf8', barThickness: 100 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });
            thumbCTRChartObj = new Chart(document.getElementById('thumbCTRChart'), {
                type: 'bar', data: { labels: ['高解像度', '最高解像度'], datasets: [{ label: '平均CTR (%)', data: [6.32, 6.18], backgroundColor: '#60a5fa', barThickness: 100 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });
        }

        function initEngagementCharts() {
            if (engagementRankingChartObj) return;
            engagementRankingChartObj = new Chart(document.getElementById('engagementRankingChart'), {
                type: 'bar',
                data: {
                    labels: ['動画編集のプロ技公開', '人気YouTuberの習慣', '収益化のコツ', '【特別】裏技公開', '収益化のコツ', '【必見】違いがわかる', '【Tips】すぐ使える方法', '【ショート】編集のコツ', 'エンゲージメントを高める方法', '【注目】最新化テクニック'],
                    datasets: [
                        { label: 'いいね率 (%)', data: [6.2, 6.3, 5.8, 6.2, 5.5, 5.7, 5.2, 5.3, 4.8, 4.5], backgroundColor: '#f87171' },
                        { label: 'コメント率 (%)', data: [1.4, 1.1, 1.2, 0.6, 1.2, 1.0, 1.1, 0.8, 1.2, 1.3], backgroundColor: '#a78bfa' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { ticks: { autoSkip: false, maxRotation: 45, minRotation: 45 } }, y: { beginAtZero: true } }, plugins: { legend: { position: 'bottom' } } }
            });
        }

        function initTrafficCharts() {
            if (trafficSourceChartObj) return;

            trafficSourceChartObj = new Chart(document.getElementById('trafficSourceChart'), {
                type: 'bar',
                data: {
                    labels: ['検索', '提案動画', 'チャンネルページ', '外部URL', 'プレイリスト'],
                    datasets: [{ label: '視聴数', data: [45000, 38000, 25000, 12000, 8000], backgroundColor: '#818cf8' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });

            trafficPieChartObj = new Chart(document.getElementById('trafficPieChart'), {
                type: 'pie',
                data: {
                    labels: ['検索 35.2%', '提案動画 29.7%', 'チャンネルページ 19.5%', '外部URL 9.4%', 'プレイリスト 6.2%'],
                    datasets: [{ data: [35.2, 29.7, 19.5, 9.4, 6.2], backgroundColor: ['#60a5fa', '#34d399', '#818cf8', '#f472b6', '#fb923c'] }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { boxWidth: 12 } } } }
            });

            trafficWatchTimeChartObj = new Chart(document.getElementById('trafficWatchTimeChart'), {
                type: 'bar',
                data: {
                    labels: ['検索', '提案動画', 'チャンネルページ', '外部URL', 'プレイリスト'],
                    datasets: [{ label: '総視聴時間 (分)', data: [280000, 240000, 180000, 85000, 60000], backgroundColor: '#f472b6' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });
        }

        function initDeviceCharts() {
            if (deviceViewsChartObj) return;

            deviceViewsChartObj = new Chart(document.getElementById('deviceViewsChart'), {
                type: 'bar',
                data: {
                    labels: ['モバイル', 'PC', 'TV', 'タブレット'],
                    datasets: [{ label: '総視聴数', data: [65000, 48000, 12000, 3000], backgroundColor: '#818cf8' }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { y: { beginAtZero: true } } }
            });

            devicePieChartObj = new Chart(document.getElementById('devicePieChart'), {
                type: 'pie',
                data: {
                    labels: ['モバイル 50.8%', 'PC 37.5%', 'TV 9.4%', 'タブレット 2.3%'],
                    datasets: [{ data: [50.8, 37.5, 9.4, 2.3], backgroundColor: ['#60a5fa', '#818cf8', '#f472b6', '#34d399'] }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { boxWidth: 12 } } } }
            });
        }
        function initComparisonCharts() {
            if (compCTRChartObj) return;

            // CTR Chart
            compCTRChartObj = new Chart(document.getElementById('compCTRChart'), {
                type: 'bar',
                data: {
                    labels: ['基本と実践', '作り方完全ガイド', '成長戦略2025'],
                    datasets: [{
                        label: 'CTR (%)',
                        data: [5.6, 6.2, 4.9],
                        backgroundColor: ['#60a5fa', '#3b82f6', '#2563eb']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 8 } } }
            });

            // Retention Chart
            compRetentionChartObj = new Chart(document.getElementById('compRetentionChart'), {
                type: 'bar',
                data: {
                    labels: ['基本と実践', '作り方完全ガイド', '成長戦略2025'],
                    datasets: [{
                        label: '視聴維持率 (%)',
                        data: [48, 52, 45],
                        backgroundColor: '#8b5cf6'
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100 } } }
            });

            // Views Chart
            compViewsChartObj = new Chart(document.getElementById('compViewsChart'), {
                type: 'bar',
                data: {
                    labels: ['基本と実践', '作り方完全ガイド', '成長戦略2025'],
                    datasets: [{
                        label: '再生回数',
                        data: [32000, 41000, 28000],
                        backgroundColor: '#10b981'
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
            });

            // Initial Views Chart (Line)
            compInitialViewsChartObj = new Chart(document.getElementById('compInitialViewsChart'), {
                type: 'line',
                data: {
                    labels: ['0h', '12h', '24h', '48h', '72h'],
                    datasets: [
                        { label: '基本と実践', data: [0, 500, 1200, 2500, 3200], borderColor: '#60a5fa' },
                        { label: '作り方完全ガイド', data: [0, 800, 1500, 3200, 4100], borderColor: '#3b82f6' },
                        { label: '成長戦略2025', data: [0, 400, 900, 1800, 2600], borderColor: '#2563eb' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
            });
        }
    </script>
</body>

</html>